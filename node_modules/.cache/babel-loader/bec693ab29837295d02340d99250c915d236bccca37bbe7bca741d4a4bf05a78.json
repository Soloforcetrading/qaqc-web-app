{"ast":null,"code":"var _jsxFileName = \"/Users/taariqsolomons/Downloads/git hub/qaqc_web_app/src/PossessionOfSite.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { db, storage } from \"./firebaseConfig\";\nimport { collection, addDoc, serverTimestamp, query, orderBy, onSnapshot } from \"firebase/firestore\";\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PossessionOfSite() {\n  _s();\n  const [file, setFile] = useState(null);\n  const [note, setNote] = useState(\"\");\n  const [uploads, setUploads] = useState([]);\n  const projectId = \"demoProject\"; // Replace or pass in dynamically later\n\n  useEffect(() => {\n    const q = query(collection(db, `projects/${projectId}_stage5_possessionOfSite`), orderBy(\"timestamp\", \"desc\"));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      setUploads(snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      })));\n    });\n    return () => unsubscribe();\n  }, []);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!file) return alert(\"Please select a file\");\n    const fileRef = ref(storage, `stage5/possessionOfSite/${projectId}/${file.name}`);\n    await uploadBytes(fileRef, file);\n    const fileURL = await getDownloadURL(fileRef);\n    await addDoc(collection(db, `projects/${projectId}_stage5_possessionOfSite`), {\n      note,\n      fileName: file.name,\n      fileURL,\n      timestamp: serverTimestamp()\n    });\n    setFile(null);\n    setNote(\"\");\n    alert(\"Uploaded successfully\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 700,\n      margin: 'auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Possession of Site\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: e => setFile(e.target.files[0]),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Add optional notes here...\",\n        value: note,\n        onChange: e => setNote(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Uploaded Files\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: uploads.map(upload => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: upload.fileURL,\n          target: \"_blank\",\n          rel: \"noreferrer\",\n          children: upload.fileName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this), upload.note && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"em\", {\n            children: \"Note:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 32\n          }, this), \" \", upload.note]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 29\n        }, this)]\n      }, upload.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(PossessionOfSite, \"utUcLD42JCCvMBQgsYXoKHPx90E=\");\n_c = PossessionOfSite;\nvar _c;\n$RefreshReg$(_c, \"PossessionOfSite\");","map":{"version":3,"names":["React","useState","useEffect","db","storage","collection","addDoc","serverTimestamp","query","orderBy","onSnapshot","ref","uploadBytes","getDownloadURL","jsxDEV","_jsxDEV","PossessionOfSite","_s","file","setFile","note","setNote","uploads","setUploads","projectId","q","unsubscribe","snapshot","docs","map","doc","id","data","handleSubmit","e","preventDefault","alert","fileRef","name","fileURL","fileName","timestamp","style","maxWidth","margin","children","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","target","files","required","placeholder","value","upload","href","rel","_c","$RefreshReg$"],"sources":["/Users/taariqsolomons/Downloads/git hub/qaqc_web_app/src/PossessionOfSite.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { db, storage } from \"./firebaseConfig\";\nimport {\n  collection,\n  addDoc,\n  serverTimestamp,\n  query,\n  orderBy,\n  onSnapshot\n} from \"firebase/firestore\";\nimport {\n  ref,\n  uploadBytes,\n  getDownloadURL\n} from \"firebase/storage\";\n\nexport default function PossessionOfSite() {\n  const [file, setFile] = useState(null);\n  const [note, setNote] = useState(\"\");\n  const [uploads, setUploads] = useState([]);\n\n  const projectId = \"demoProject\"; // Replace or pass in dynamically later\n\n  useEffect(() => {\n    const q = query(\n      collection(db, `projects/${projectId}_stage5_possessionOfSite`),\n      orderBy(\"timestamp\", \"desc\")\n    );\n\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      setUploads(snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!file) return alert(\"Please select a file\");\n\n    const fileRef = ref(storage, `stage5/possessionOfSite/${projectId}/${file.name}`);\n    await uploadBytes(fileRef, file);\n    const fileURL = await getDownloadURL(fileRef);\n\n    await addDoc(collection(db, `projects/${projectId}_stage5_possessionOfSite`), {\n      note,\n      fileName: file.name,\n      fileURL,\n      timestamp: serverTimestamp()\n    });\n\n    setFile(null);\n    setNote(\"\");\n    alert(\"Uploaded successfully\");\n  };\n\n  return (\n    <div style={{ maxWidth: 700, margin: 'auto' }}>\n      <h2>Possession of Site</h2>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"file\"\n          onChange={(e) => setFile(e.target.files[0])}\n          required\n        />\n        <textarea\n          placeholder=\"Add optional notes here...\"\n          value={note}\n          onChange={(e) => setNote(e.target.value)}\n        />\n        <button type=\"submit\">Upload</button>\n      </form>\n\n      <h3>Uploaded Files</h3>\n      <ul>\n        {uploads.map(upload => (\n          <li key={upload.id}>\n            <a href={upload.fileURL} target=\"_blank\" rel=\"noreferrer\">\n              {upload.fileName}\n            </a>\n            {upload.note && <p><em>Note:</em> {upload.note}</p>}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}